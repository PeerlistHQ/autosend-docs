---
title: 'API Errors'
description: 'This guide provides a comprehensive breakdown of all possible API errors, HTTP status codes, and how to handle them effectively.'
---

import { SUPPORT_EMAIL } from '/snippets/custom-variables.mdx'

## HTTP Status Codes Overview

The AutoSend API uses standard HTTP status codes to indicate the success or failure of your requests:

| Code | Status | Description | When It Occurs |
|------|--------|-------------|----------------|
| `200` | OK | Request succeeded | Successful GET, PUT, PATCH, or DELETE requests |
| `201` | Created | Resource created successfully | Successful POST requests that create new resources |
| `400` | Bad Request | Invalid request parameters | Validation errors, malformed requests |
| `401` | Unauthorized | Missing or invalid API key | Authentication failures |
| `402` | Payment Required | Payment required | Payment issues, subscription expired |
| `403` | Forbidden | Insufficient permissions or limits | Plan limits exceeded, insufficient access |
| `404` | Not Found | Resource doesn't exist | Requesting non-existent resources |
| `409` | Conflict | Resource conflict | Duplicate resources, conflicting state |
| `500` | Internal Server Error | Server error | Unexpected server-side errors |

## Success Responses

### 200 OK

The request was successful. This is typically returned for:
- GET requests retrieving resources
- PUT/PATCH requests updating resources
- DELETE requests removing resources
- POST requests that update existing resources (upsert operations)

**Example Response:**

```json
{
  "success": true,
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "email": "john.doe@example.com",
    "firstName": "John",
    "lastName": "Doe"
  }
}
```

### 201 Created

The resource was successfully created. This is returned for POST requests that create new resources.

**Example Response:**

```json
{
  "success": true,
  "message": "Contact created successfully",
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "email": "john.doe@example.com",
    "createdAt": "2024-01-15T10:30:00.000Z"
  }
}
```

## Client Errors (4xx)

### 400 Bad Request

The request was malformed or contains invalid data. This is the most common error code for validation issues.

**Common Causes:**
- Invalid email format
- Missing required fields
- Invalid data types
- Value constraints violated (e.g., max length exceeded)
- Malformed JSON

**Error Response Format:**

```json
{
  "success": false,
  "message": "Validation failed",
  "errors": [
    {
      "field": "to.email",
      "message": "Invalid email format"
    },
    {
      "field": "subject",
      "message": "Subject is required when not using templateId"
    }
  ]
}
```

**Alternative Format (for some endpoints):**

```json
{
  "success": false,
  "error": "Validation failed",
  "message": "Invalid email format or missing required fields"
}
```

**Common 400 Error Scenarios:**

#### Invalid Email Format

```json
{
  "success": false,
  "message": "Validation failed",
  "errors": [
    {
      "field": "to.email",
      "message": "Invalid email format"
    }
  ]
}
```

**Solution:** Ensure email addresses follow the correct format: `user@example.com`

#### Missing Required Fields

```json
{
  "success": false,
  "message": "Validation failed",
  "errors": [
    {
      "field": "email",
      "message": "Email is required"
    }
  ]
}
```

**Solution:** Include all required fields in your request. Check the endpoint documentation for required parameters.

#### Invalid ObjectId Format

```json
{
  "success": false,
  "error": "Validation failed",
  "message": "Invalid ObjectId format"
}
```

**Solution:** Ensure ObjectIds are valid 24-character hexadecimal strings (MongoDB format).

#### Missing Content for Email

```json
{
  "success": false,
  "message": "Either templateId or html/text content must be provided"
}
```

**Solution:** Provide either a `templateId` or `html`/`text` content in your request.

#### Bulk Update Limit Exceeded

```json
{
  "success": false,
  "error": "Validation failed",
  "message": "Maximum 100 contacts allowed per bulk update request"
}
```

**Solution:** Split your request into multiple batches of 100 contacts or fewer.

**Handling 400 Errors:**

```javascript
try {
  const response = await fetch('https://api.autosend.com/v1/api/contacts', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${API_KEY}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  });
  
  if (!response.ok) {
    const error = await response.json();
    if (response.status === 400) {
      // Handle validation errors
      if (error.errors) {
        error.errors.forEach(err => {
          console.error(`Field ${err.field}: ${err.message}`);
        });
      } else {
        console.error(error.message);
      }
    }
  }
} catch (error) {
  console.error('Request failed:', error);
}
```

### 401 Unauthorized

The API key is missing, invalid, or expired.

**Error Response:**

```json
{
  "success": false,
  "message": "Unauthorized"
}
```

**Common Causes:**
- Missing `Authorization` header
- Invalid API key
- Expired API key
- Incorrect API key format

**Solution:**
1. Verify your API key is correct
2. Ensure the `Authorization` header is included: `Authorization: Bearer YOUR_API_KEY`
3. Check that your API key hasn't been revoked or expired
4. Regenerate your API key if necessary

**Handling 401 Errors:**

```javascript
if (response.status === 401) {
  console.error('Authentication failed. Please check your API key.');
  // Prompt user to update API key or redirect to login
}
```

### 402 Payment Required

Payment is required to complete the request. This typically occurs when there are payment issues or the subscription has expired.

**Error Response:**

```json
{
  "success": false,
  "error": "Payment Required",
  "message": "Payment required"
}
```

**Common Causes:**
- Subscription expired
- Payment method declined
- Account requires payment
- Billing issues

**Solution:**
1. Check your account billing status
2. Update your payment method if needed
3. Ensure your subscription is active
4. Contact support if you believe this is an error

**Handling 402 Errors:**

```javascript
if (response.status === 402) {
  console.error('Payment required. Please update your payment method.');
  // Redirect user to billing page or prompt for payment
}
```

### 403 Forbidden

The API key is valid but doesn't have permission to perform the requested action, or a plan limit has been exceeded.

**Error Response:**

```json
{
  "success": false,
  "error": "Forbidden",
  "message": "Contact limit exceeded for your plan"
}
```

**Common Causes:**
- Contact limit exceeded for your plan
- Feature not available in your plan tier
- API key doesn't have required permissions
- Account suspended or restricted

**Solution:**
1. Check your plan limits in the dashboard
2. Upgrade your plan if you need higher limits
3. Contact support if you believe this is an error

**Handling 403 Errors:**

```javascript
if (response.status === 403) {
  const error = await response.json();
  console.error(`Access denied: ${error.message}`);
  // Show upgrade prompt or contact support
}
```

### 404 Not Found

The requested resource doesn't exist.

**Error Response:**

```json
{
  "success": false,
  "error": "Not Found",
  "message": "Contact does not exist"
}
```

**Common Causes:**
- Invalid resource ID
- Resource was deleted
- Resource belongs to a different project
- Incorrect endpoint path

**Solution:**
1. Verify the resource ID is correct
2. Check that the resource hasn't been deleted
3. Ensure you're using the correct endpoint
4. Verify the resource exists in your project

**Handling 404 Errors:**

```javascript
if (response.status === 404) {
  console.error('Resource not found');
  // Handle gracefully - resource may have been deleted
}
```

### 409 Conflict

The request conflicts with the current state of the resource.

**Error Response:**

```json
{
  "success": false,
  "error": "Conflict",
  "message": "A contact with this email already exists in the project"
}
```

**Common Causes:**
- Duplicate contact email (when using Create Contact endpoint)
- Resource already exists with conflicting unique identifier
- Concurrent modification conflicts

**Solution:**
1. Use the Upsert Contact endpoint instead of Create Contact if you want to update existing contacts
2. Check for existing resources before creating new ones
3. Implement proper conflict resolution in your application

**Handling 409 Errors:**

```javascript
if (response.status === 409) {
  // Use upsert endpoint instead
  const upsertResponse = await fetch('https://api.autosend.com/v1/api/contacts/email', {
    method: 'POST',
    // ... same data
  });
}
```

## Server Errors (5xx)

### 500 Internal Server Error

An unexpected error occurred on the server side.

**Error Response:**

```json
{
  "success": false,
  "error": "Internal Server Error",
  "message": "Something went wrong on our end"
}
```

**Common Causes:**
- Unexpected server-side exception
- Database connection issues
- Third-party service failures
- Temporary system issues

**Solution:**
1. Retry the request after a short delay (with exponential backoff)
2. Check the AutoSend status page for known issues
3. If the error persists, contact support with the request details

**Handling 500 Errors:**

```javascript
if (response.status === 500) {
  // Log the error for monitoring
  console.error('Server error occurred:', error);
  
  // Retry with exponential backoff
  const retryAfter = Math.pow(2, attempt) * 1000;
  setTimeout(() => retryRequest(), retryAfter);
}
```

## Error Response Formats

The API uses different error response formats depending on the endpoint and error type:

### Standard Error Response

Used by most endpoints for general errors:

```json
{
  "success": false,
  "error": "Error Type",
  "message": "Human-readable error message"
}
```

### Validation Error Response

Used for 400 Bad Request errors with field-specific validation issues:

```json
{
  "success": false,
  "message": "Validation failed",
  "errors": [
    {
      "field": "fieldName",
      "message": "Field-specific error message"
    }
  ]
}
```

## Best Practices for Error Handling

### 1. Always Check Response Status

```javascript
const response = await fetch(url, options);
if (!response.ok) {
  const error = await response.json();
  // Handle error based on status code
}
```

### 2. Implement Comprehensive Error Handling

```javascript
async function handleApiRequest(url, options) {
  try {
    const response = await fetch(url, options);
    const data = await response.json();
    
    if (!response.ok) {
      switch (response.status) {
        case 400:
          handleValidationError(data);
          break;
        case 401:
          handleAuthenticationError();
          break;
        case 402:
          handlePaymentError(data);
          break;
        case 403:
          handlePermissionError(data);
          break;
        case 404:
          handleNotFoundError();
          break;
        case 409:
          handleConflictError(data);
          break;
        case 500:
          await handleServerError(response.status);
          break;
        default:
          handleUnknownError(response.status, data);
      }
      throw new Error(data.message || 'Request failed');
    }
    
    return data;
  } catch (error) {
    if (error instanceof TypeError) {
      // Network error
      console.error('Network error:', error);
    } else {
      // API error
      console.error('API error:', error);
    }
    throw error;
  }
}
```

### 3. Implement Retry Logic

```javascript
async function retryRequest(requestFn, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await requestFn();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      
      // Only retry on certain errors
      const shouldRetry = error.status === 500;
      
      if (shouldRetry) {
        const delay = error.retryAfter 
          ? error.retryAfter * 1000 
          : Math.pow(2, i) * 1000;
        await new Promise(resolve => setTimeout(resolve, delay));
      } else {
        throw error;
      }
    }
  }
}
```

### 4. Log Errors for Monitoring

```javascript
function logError(error, context) {
  // Log to your error tracking service
  console.error('API Error:', {
    status: error.status,
    message: error.message,
    errors: error.errors,
    context: context,
    timestamp: new Date().toISOString()
  });
}
```

### 5. Provide User-Friendly Error Messages

```javascript
function getUserFriendlyError(error) {
  switch (error.status) {
    case 400:
      return 'Please check your input and try again.';
    case 401:
      return 'Please check your API key and try again.';
    case 402:
      return 'Payment required. Please update your payment method.';
    case 403:
      return 'You have reached your plan limit. Please upgrade your plan.';
    case 404:
      return 'The requested resource was not found.';
    case 500:
      return 'Service temporarily unavailable. Please try again later.';
    default:
      return 'An unexpected error occurred. Please try again.';
  }
}
```

## Common Error Scenarios

### Domain Not Verified

**Error:**

```json
{
  "success": false,
  "message": "Domain not verified"
}
```

**Solution:** Verify your sending domain in Settings > Domains. [Domain verification guide â†’](/domain-configuration)

### Contact Already Exists

**Error:**

```json
{
  "success": false,
  "error": "Contact already exists",
  "message": "A contact with this email already exists in the project"
}
```

**Solution:** Use the Upsert Contact endpoint (`POST /api/contacts/email`) instead of Create Contact if you want to update existing contacts.

### Invalid Template ID

**Error:**

```json
{
  "success": false,
  "message": "Template not found"
}
```

**Solution:** Verify the template ID exists in your project and is accessible with your API key.

## Error Monitoring and Debugging

### 1. Enable Request/Response Logging

```javascript
function logRequest(url, options, response, data) {
  console.log('Request:', {
    method: options.method,
    url: url,
    headers: options.headers,
    body: options.body
  });
  
  console.log('Response:', {
    status: response.status,
    headers: Object.fromEntries(response.headers),
    body: data
  });
}
```

### 2. Track Error Rates

Monitor the frequency of different error types to identify issues early:

```javascript
const errorStats = {
  400: 0,
  401: 0,
  402: 0,
  403: 0,
  404: 0,
  500: 0
};

function trackError(status) {
  if (errorStats[status] !== undefined) {
    errorStats[status]++;
  }
}
```

### 3. Include Request IDs in Support Requests

When contacting support, include:
- Request URL
- Request method and headers
- Request body
- Response status and body
- Timestamp
- Your API key identifier (not the actual key)

## Need Help?

If you're experiencing persistent errors or need assistance with error handling, please contact support at <a href={`mailto:${SUPPORT_EMAIL}`}>{SUPPORT_EMAIL}</a>.

When reporting errors, please include:
- The endpoint you're calling
- The request payload
- The full error response
- Steps to reproduce the issue

